
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>CI Workflow Guide - LyoPRONTO Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.84d31ad4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#ci-workflow-guide" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="LyoPRONTO Documentation" class="md-header__button md-logo" aria-label="LyoPRONTO Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            LyoPRONTO Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              CI Workflow Guide
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="LyoPRONTO Documentation" class="md-nav__button md-logo" aria-label="LyoPRONTO Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    LyoPRONTO Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LyoPRONTO: Getting Started
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tutorials
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../how-to-guides/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    How-to Guide
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../explanation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Explanations
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Full listing of all docstrings by module
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#workflow-stages" class="md-nav__link">
    <span class="md-ellipsis">
      Workflow Stages
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Workflow Stages">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stage-1-development-review-fast-tests" class="md-nav__link">
    <span class="md-ellipsis">
      Stage 1: Development &amp; Review (Fast Tests)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stage-2-pre-merge-verification-full-coverage" class="md-nav__link">
    <span class="md-ellipsis">
      Stage 2: Pre-Merge Verification (Full Coverage)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#visual-flow" class="md-nav__link">
    <span class="md-ellipsis">
      Visual Flow
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#github-actions-triggers" class="md-nav__link">
    <span class="md-ellipsis">
      GitHub Actions Triggers
    </span>
  </a>
  
    <nav class="md-nav" aria-label="GitHub Actions Triggers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pr-tests-fast" class="md-nav__link">
    <span class="md-ellipsis">
      PR Tests (Fast)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#coverage-tests-full" class="md-nav__link">
    <span class="md-ellipsis">
      Coverage Tests (Full)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#benefits-of-this-approach" class="md-nav__link">
    <span class="md-ellipsis">
      Benefits of This Approach
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Benefits of This Approach">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#for-developers" class="md-nav__link">
    <span class="md-ellipsis">
      For Developers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#for-reviewers" class="md-nav__link">
    <span class="md-ellipsis">
      For Reviewers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#for-project-maintainers" class="md-nav__link">
    <span class="md-ellipsis">
      For Project Maintainers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comparison-with-other-strategies" class="md-nav__link">
    <span class="md-ellipsis">
      Comparison with Other Strategies
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-timeline" class="md-nav__link">
    <span class="md-ellipsis">
      Example Timeline
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Example Timeline">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scenario-pr-with-3-commits-before-approval" class="md-nav__link">
    <span class="md-ellipsis">
      Scenario: PR with 3 commits before approval
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#monitoring-troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      Monitoring &amp; Troubleshooting
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Monitoring &amp; Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#check-workflow-status" class="md-nav__link">
    <span class="md-ellipsis">
      Check Workflow Status
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#if-fast-tests-fail" class="md-nav__link">
    <span class="md-ellipsis">
      If Fast Tests Fail
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#if-coverage-tests-fail-after-approval" class="md-nav__link">
    <span class="md-ellipsis">
      If Coverage Tests Fail After Approval
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#expected-behavior" class="md-nav__link">
    <span class="md-ellipsis">
      Expected Behavior
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#manual-override-if-needed" class="md-nav__link">
    <span class="md-ellipsis">
      Manual Override (If Needed)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-files" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration Files
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      Best Practices
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Best Practices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#for-contributors" class="md-nav__link">
    <span class="md-ellipsis">
      For Contributors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#for-reviewers_1" class="md-nav__link">
    <span class="md-ellipsis">
      For Reviewers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#for-maintainers" class="md-nav__link">
    <span class="md-ellipsis">
      For Maintainers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      Troubleshooting
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#coverage-tests-didnt-run-after-approval" class="md-nav__link">
    <span class="md-ellipsis">
      "Coverage tests didn't run after approval"
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fast-tests-taking-too-long" class="md-nav__link">
    <span class="md-ellipsis">
      "Fast tests taking too long"
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#coverage-decreased-after-merge" class="md-nav__link">
    <span class="md-ellipsis">
      "Coverage decreased after merge"
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#future-enhancements" class="md-nav__link">
    <span class="md-ellipsis">
      Future Enhancements
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
    <span class="md-ellipsis">
      References
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="ci-workflow-guide">CI Workflow Guide</h1>
<h2 id="overview">Overview</h2>
<p>The LyoPRONTO project uses a <strong>smart, draft-aware CI workflow</strong> for optimal developer experience and quality assurance:</p>
<ol>
<li><strong>Draft PRs</strong>: Fast tests only (3-5 minutes) - rapid iteration</li>
<li><strong>Ready for Review</strong>: Full coverage (5-7 minutes) - quality verification</li>
<li><strong>Main Branch</strong>: Full coverage (5-7 minutes) - maintain metrics</li>
</ol>
<p>This approach provides quick feedback during development while ensuring thorough quality checks when PR is ready for review.</p>
<h2 id="workflow-stages">Workflow Stages</h2>
<h3 id="stage-1-development-review-fast-tests">Stage 1: Development &amp; Review (Fast Tests)</h3>
<p><strong>Workflow</strong>: <code>.github/workflows/pr-tests.yml</code></p>
<p><strong>Triggers</strong>: Every commit pushed to a pull request
- PR opened
- New commits pushed (synchronize)
- PR reopened</p>
<p><strong>What runs</strong>:</p>
<pre><code class="language-bash">pytest tests/ -n auto -v  # No coverage
</code></pre>
<p><strong>Duration</strong>: ~3-5 minutes</p>
<p><strong>Purpose</strong>:
- âœ… Quick feedback for developers
- âœ… Catch breaking changes immediately
- âœ… Allow rapid iteration
- âŒ No coverage analysis (saves ~2 minutes)</p>
<p><strong>When it runs</strong>:</p>
<pre><code>Developer pushes code â†’ Fast tests run automatically
â†“
Tests pass â†’ Ready for review
Tests fail â†’ Developer fixes and pushes again â†’ Fast tests re-run
</code></pre>
<h3 id="stage-2-pre-merge-verification-full-coverage">Stage 2: Pre-Merge Verification (Full Coverage)</h3>
<p><strong>Workflow</strong>: <code>.github/workflows/tests.yml</code></p>
<p><strong>Triggers</strong>: 
1. PR approved by reviewer
2. Direct pushes to <code>main</code> or <code>dev-pyomo</code> branches</p>
<p><strong>What runs</strong>:</p>
<pre><code class="language-bash">pytest tests/ -n auto -v --cov=lyopronto --cov-report=xml
# + Upload to Codecov
</code></pre>
<p><strong>Duration</strong>: ~5-7 minutes</p>
<p><strong>Purpose</strong>:
- âœ… Full quality verification before merge
- âœ… Coverage analysis and reporting
- âœ… Final confirmation PR is merge-ready
- âœ… Maintain quality metrics on main branch</p>
<p><strong>When it runs</strong>:</p>
<pre><code>Developer pushes code â†’ Fast tests pass â†’ Reviewer approves PR
â†“
Full coverage tests run automatically
â†“
Coverage tests pass â†’ Safe to merge
Coverage tests fail â†’ Address issues before merge
</code></pre>
<h2 id="visual-flow">Visual Flow</h2>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Pull Request Lifecycle                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. Developer Creates PR
   â””â”€&gt; Fast Tests Run (pr-tests.yml)
       â”œâ”€ Duration: ~3-5 min
       â”œâ”€ No coverage
       â””â”€ Result: âœ… or âŒ

2. Developer Pushes More Commits
   â””â”€&gt; Fast Tests Re-run (pr-tests.yml)
       â””â”€ Every commit triggers new run

3. Reviewer Approves PR
   â””â”€&gt; Full Coverage Tests Run (tests.yml)
       â”œâ”€ Duration: ~5-7 min
       â”œâ”€ With coverage
       â”œâ”€ Upload to Codecov
       â””â”€ Result: âœ… or âŒ

4. Merge to Main
   â””â”€&gt; Full Coverage Tests Run Again (tests.yml)
       â””â”€&gt; Updates coverage metrics for main branch
</code></pre>
<h2 id="github-actions-triggers">GitHub Actions Triggers</h2>
<h3 id="pr-tests-fast">PR Tests (Fast)</h3>
<pre><code class="language-yaml">on:
  pull_request:
    branches: [ main, dev-pyomo ]
    types: [ opened, synchronize, reopened ]
</code></pre>
<h3 id="coverage-tests-full">Coverage Tests (Full)</h3>
<pre><code class="language-yaml">on:
  push:
    branches: [ main, dev-pyomo ]
  pull_request_review:
    types: [ submitted ]

jobs:
  test:
    if: |
      github.event_name == 'push' || 
      (github.event_name == 'pull_request_review' &amp;&amp; github.event.review.state == 'approved')
</code></pre>
<h2 id="benefits-of-this-approach">Benefits of This Approach</h2>
<h3 id="for-developers">For Developers</h3>
<ul>
<li>âš¡ <strong>Fast feedback</strong> (3-5 min instead of 11+ min)</li>
<li>ğŸ”„ <strong>Quick iterations</strong> during development</li>
<li>ğŸ¯ <strong>Focus on functionality</strong> first, coverage later</li>
<li>ğŸ’° <strong>Saves CI minutes</strong> (reduced by 55-73% per commit)</li>
</ul>
<h3 id="for-reviewers">For Reviewers</h3>
<ul>
<li>âœ… <strong>Immediate test status</strong> when reviewing code</li>
<li>ğŸ“Š <strong>Full coverage</strong> before approving merge</li>
<li>ğŸ”’ <strong>Quality gate</strong> at approval time</li>
<li>ğŸš¦ <strong>Clear merge readiness</strong> signals</li>
</ul>
<h3 id="for-project-maintainers">For Project Maintainers</h3>
<ul>
<li>ğŸ“ˆ <strong>Maintain high coverage</strong> on main branch</li>
<li>ğŸ’¸ <strong>Reduce CI costs</strong> (fewer coverage runs)</li>
<li>âš™ï¸ <strong>Optimize resource usage</strong></li>
<li>ğŸ“Š <strong>Accurate coverage metrics</strong> for merged code</li>
</ul>
<h2 id="comparison-with-other-strategies">Comparison with Other Strategies</h2>
<table>
<thead>
<tr>
<th>Strategy</th>
<th>PR Commits</th>
<th>After Approval</th>
<th>Total CI Time</th>
<th>Pros</th>
<th>Cons</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Our Approach</strong></td>
<td>Fast (3-5m)</td>
<td>Full (5-7m)</td>
<td><strong>8-12m total</strong></td>
<td>âœ… Fast iteration<br>âœ… Full verification</td>
<td>Requires approval workflow</td>
</tr>
<tr>
<td>Run coverage every time</td>
<td>Full (11m)</td>
<td>-</td>
<td><strong>11m Ã— commits</strong></td>
<td>Simple setup</td>
<td>âŒ Slow feedback<br>âŒ Expensive</td>
</tr>
<tr>
<td>No coverage on PRs</td>
<td>Fast (3-5m)</td>
<td>-</td>
<td><strong>3-5m total</strong></td>
<td>âœ… Very fast</td>
<td>âŒ No coverage check</td>
</tr>
<tr>
<td>Coverage on merge only</td>
<td>-</td>
<td>Full (5-7m)</td>
<td><strong>5-7m</strong></td>
<td>Minimal runs</td>
<td>âŒ Late discovery</td>
</tr>
</tbody>
</table>
<h2 id="example-timeline">Example Timeline</h2>
<h3 id="scenario-pr-with-3-commits-before-approval">Scenario: PR with 3 commits before approval</h3>
<p><strong>Before optimization</strong> (coverage on every commit):</p>
<pre><code>Commit 1: 11 min
Commit 2: 11 min  
Commit 3: 11 min
Approval: -
Merge:    11 min
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Total:    44 minutes
</code></pre>
<p><strong>After optimization</strong> (our approach):</p>
<pre><code>Commit 1: 3 min (fast)
Commit 2: 3 min (fast)
Commit 3: 3 min (fast)
Approval: 7 min (full coverage)
Merge:    7 min (full coverage)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Total:    23 minutes (47% reduction! ğŸ‰)
</code></pre>
<h2 id="monitoring-troubleshooting">Monitoring &amp; Troubleshooting</h2>
<h3 id="check-workflow-status">Check Workflow Status</h3>
<p>In GitHub UI:
1. Go to "Actions" tab
2. See "PR Tests (Fast)" for development feedback
3. See "Tests (with Coverage)" after approval/merge</p>
<h3 id="if-fast-tests-fail">If Fast Tests Fail</h3>
<ul>
<li>Fix the code</li>
<li>Push new commit</li>
<li>Fast tests re-run automatically</li>
</ul>
<h3 id="if-coverage-tests-fail-after-approval">If Coverage Tests Fail After Approval</h3>
<ul>
<li>Review coverage report</li>
<li>Add missing tests</li>
<li>Push new commit</li>
<li>Fast tests run again</li>
<li>Request re-approval</li>
<li>Coverage tests run again</li>
</ul>
<h3 id="expected-behavior">Expected Behavior</h3>
<table>
<thead>
<tr>
<th>Event</th>
<th>Fast Tests</th>
<th>Coverage Tests</th>
</tr>
</thead>
<tbody>
<tr>
<td>Open PR</td>
<td>âœ… Run</td>
<td>âŒ Skip</td>
</tr>
<tr>
<td>Push to PR</td>
<td>âœ… Run</td>
<td>âŒ Skip</td>
</tr>
<tr>
<td>Request changes</td>
<td>âœ… Continue</td>
<td>âŒ Skip</td>
</tr>
<tr>
<td>Approve PR</td>
<td>âœ… Already ran</td>
<td>âœ… Run</td>
</tr>
<tr>
<td>Merge to main</td>
<td>âŒ Skip</td>
<td>âœ… Run</td>
</tr>
</tbody>
</table>
<h2 id="manual-override-if-needed">Manual Override (If Needed)</h2>
<p>To manually trigger full coverage tests without approval:</p>
<ol>
<li>Go to Actions tab</li>
<li>Select "Tests (with Coverage)" workflow</li>
<li>Click "Run workflow"</li>
<li>Select branch</li>
</ol>
<p>Or add a comment to trigger (if you set up comment triggers):</p>
<pre><code>/run-coverage
</code></pre>
<h2 id="configuration-files">Configuration Files</h2>
<ul>
<li><code>.github/workflows/pr-tests.yml</code> - Fast tests for PRs</li>
<li><code>.github/workflows/tests.yml</code> - Full coverage tests</li>
<li><code>pytest.ini</code> - Test configuration</li>
<li><code>.coveragerc</code> - Coverage configuration (if present)</li>
</ul>
<h2 id="best-practices">Best Practices</h2>
<h3 id="for-contributors">For Contributors</h3>
<ol>
<li>âœ… Run tests locally before pushing: <code>pytest tests/ -n auto</code></li>
<li>âœ… Push small, focused commits</li>
<li>âœ… Wait for fast tests to pass before requesting review</li>
<li>âœ… Address any coverage gaps when requested</li>
</ol>
<h3 id="for-reviewers_1">For Reviewers</h3>
<ol>
<li>âœ… Check that fast tests passed</li>
<li>âœ… Review code quality and logic</li>
<li>âœ… Approve when ready to trigger full coverage</li>
<li>âœ… Wait for coverage tests to pass before merging</li>
</ol>
<h3 id="for-maintainers">For Maintainers</h3>
<ol>
<li>âœ… Monitor CI run times in Actions tab</li>
<li>âœ… Review coverage trends in Codecov</li>
<li>âœ… Adjust coverage thresholds as needed</li>
<li>âœ… Update workflows if patterns change</li>
</ol>
<h2 id="troubleshooting">Troubleshooting</h2>
<h3 id="coverage-tests-didnt-run-after-approval">"Coverage tests didn't run after approval"</h3>
<p><strong>Possible causes</strong>:
1. Review was "Comment" or "Request changes" (not "Approve")
2. Workflow condition may need adjustment
3. Check Actions tab for workflow status</p>
<p><strong>Solution</strong>: 
- Ensure reviewer clicked "Approve" (not just comment)
- Check workflow logs for condition evaluation</p>
<h3 id="fast-tests-taking-too-long">"Fast tests taking too long"</h3>
<p><strong>Expected</strong>: 3-5 minutes<br />
<strong>Investigate if</strong>: &gt;7 minutes</p>
<p><strong>Possible causes</strong>:
1. Package installation not cached
2. Too many tests running
3. GitHub runner performance issues</p>
<p><strong>Solution</strong>:
- Check cache hit rate in workflow logs
- Consider test sharding if &gt;200 tests
- Report if consistently slow</p>
<h3 id="coverage-decreased-after-merge">"Coverage decreased after merge"</h3>
<p><strong>This is expected</strong> during development.</p>
<p><strong>Actions</strong>:
1. Review uncovered lines in Codecov
2. Add tests in follow-up PR
3. Set coverage thresholds in <code>.coveragerc</code></p>
<h2 id="future-enhancements">Future Enhancements</h2>
<p>Potential improvements to consider:</p>
<ol>
<li><strong>Test Sharding</strong> - Split tests across parallel jobs for &gt;200 tests</li>
<li><strong>Selective Testing</strong> - Only run tests for changed modules</li>
<li><strong>Comment Triggers</strong> - Manual <code>/run-coverage</code> command</li>
<li><strong>Draft PR Handling</strong> - Skip CI for draft PRs</li>
<li><strong>Coverage Diff</strong> - Show coverage change in PR comments</li>
</ol>
<h2 id="references">References</h2>
<ul>
<li><a href="https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows">GitHub Actions: Workflow triggers</a></li>
<li><a href="https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows#pull_request_review">pull_request_review event</a></li>
<li><a href="https://pytest-xdist.readthedocs.io/">pytest-xdist</a> - Parallel testing</li>
<li><a href="https://pytest-cov.readthedocs.io/">pytest-cov</a> - Coverage plugin</li>
<li><a href="https://about.codecov.io/">Codecov</a> - Coverage reporting</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>